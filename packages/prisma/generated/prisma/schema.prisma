generator client {
  provider = "prisma-client-js"
  output   = "./generated/prisma"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

enum Role {
  USER
  ADMIN
  PROVIDER
}

enum AppointmentType {
  HOUSE_CLEANING
  POOL_SERVICE
  HANDYMAN
  OTHER
}

model User {
  id        String        @id @default(uuid())
  firstName String
  lastName  String
  email     String        @unique
  phone     String
  role      Role          @default(USER)
  homes     Home[]
  visits    Appointment[]
  createdAt DateTime      @default(now())
  updatedAt DateTime      @updatedAt
}

model Home {
  id             String        @id @default(uuid())
  streetAddress  String
  streetAddress2 String?
  city           String
  state          String
  zip            String
  country        String
  users          User[]
  appointments   Appointment[]
  createdAt      DateTime      @default(now())
  updatedAt      DateTime      @updatedAt
}

model Appointment {
  id        String          @id @default(uuid())
  type      AppointmentType
  hours     Int
  date      DateTime
  startTime DateTime
  endTime   DateTime
  homeId    String
  home      Home            @relation(fields: [homeId], references: [id])
  users     User[]
  createdAt DateTime        @default(now())
  updatedAt DateTime        @updatedAt
}
